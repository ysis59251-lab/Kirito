<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>เลือกตอน</title>

<style>
html{font-size:20px}
body{
  margin:0;
  color:#fff;
  font-family:sans-serif;
  background:url("https://www.akerufeed.com/wp-content/uploads/2021/07/Wallpaper-Japanese-Cartoon-Street-22.jpg")
  center/cover no-repeat fixed;
  overflow-x:hidden;
}

.container{
  max-width:540px;
  margin:auto;
  padding:16px;
}

.ep-toggle{
  background:#111;
  border-radius:16px;
  padding:18px;
  margin-bottom:14px;
  cursor:pointer;
}

.ep-list{
  display:none;
  max-height:70vh;          /* ⭐ แก้ตรงนี้ */
  overflow-y:auto;          /* ⭐ สำคัญ */
  -webkit-overflow-scrolling:touch;
}

.ep-list.open{
  display:block;
}

.episode{
  background:#222;
  border-radius:16px;
  padding:18px;
  margin-bottom:14px;
  display:flex;
  gap:14px;
  align-items:center;
  cursor:pointer;
}

.ep-num{
  background:#ff4d4d;
  padding:8px 14px;
  border-radius:12px;
}
</style>
</head>

<body>
<div class="container">

<h2>SAO ภาค 1</h2>

<div class="ep-toggle" onclick="toggleEp()">
  ▼ กล่องเลือกตอน
</div>

<div id="epList" class="ep-list">
  <div class="episode" onclick="openEp(1)"><span class="ep-num">EP1</span></div>
  <div class="episode" onclick="openEp(2)"><span class="ep-num">EP2</span></div>
  <div class="episode" onclick="openEp(3)"><span class="ep-num">EP3</span></div>
  <div class="episode" onclick="openEp(4)"><span class="ep-num">EP4</span></div>
  <div class="episode" onclick="openEp(5)"><span class="ep-num">EP5</span></div>
  <div class="episode" onclick="openEp(6)"><span class="ep-num">EP6</span></div>
  <div class="episode" onclick="openEp(7)"><span class="ep-num">EP7</span></div>
  <div class="episode" onclick="openEp(8)"><span class="ep-num">EP8</span></div>
  <div class="episode" onclick="openEp(9)"><span class="ep-num">EP9</span></div>
  <div class="episode" onclick="openEp(10)"><span class="ep-num">EP10</span></div>
</div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwTIvc9DXZk9H4M6jzccbiER4aDervYtJw0Drt7Ax_TyG9hnzyJrI8NIhwr2HH0NLu0/exec";
let epLinks = {};
let loaded = false;

fetch(API_URL)
  .then(r=>r.json())
  .then(d=>{
    d.forEach(row=>{
      epLinks[String(row.episode)] = row.video_url;
    });
    loaded = true;
  });

function toggleEp(){
  document.getElementById("epList").classList.toggle("open");
}

function openEp(ep){
  if(!loaded) return alert("กำลังโหลดข้อมูล");
  const link = epLinks[String(ep)];
  if(!link) return alert("ยังไม่มีลิงก์ตอนนี้");
  location.href = link;
}
</script>

</body>
</html>