<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>เลือกตอน</title>

<style>
/* ====== BASE ====== */
html{font-size:20px;}
body{
  margin:0;
  color:#fff;
  font-family:sans-serif;
  background:url("https://www.akerufeed.com/wp-content/uploads/2021/07/Wallpaper-Japanese-Cartoon-Street-22.jpg")
    center/cover no-repeat fixed;
  overflow-x:hidden;
}

/* ====== CONTAINER ====== */
.container{
  max-width:540px;
  margin:auto;
  padding:16px;
}

/* ====== CARD ====== */
.card-wrap{position:relative;}
.card img{
  width:100%;
  border-radius:16px;
}

/* ====== DESC ====== */
.desc{line-height:1.6;opacity:.9}

/* ====== ACCORDION ====== */
.ep-toggle{
  background:#111;
  border-radius:16px;
  padding:18px;
  margin:16px 0;
  cursor:pointer;
  box-shadow:0 6px 14px rgba(0,0,0,.4);
}

/* ⭐ แก้ตรงนี้ */
.ep-list{
  display:none;
  max-height:70vh;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}
.ep-list.open{display:block}

/* ====== EP ====== */
.episode{
  background:linear-gradient(135deg,#1e1e1e,#2b2b2b);
  border-radius:16px;
  padding:18px;
  margin-bottom:14px;
  display:flex;
  align-items:center;
  gap:14px;
  cursor:pointer;
}
.ep-num{
  background:#ff4d4d;
  padding:8px 14px;
  border-radius:12px;
  font-weight:bold;
}
.ep-title{flex:1}
</style>
</head>

<body>
<div class="container">

<h2>Sword Art Online ภาค 1 (พากย์ไทย)</h2>

<div class="card-wrap">
  <div class="card">
    <img src="https://anifume.com/images/18/Sword-Art-Online-1.jpg">
  </div>
</div>

<p class="desc">
เรื่องย่อ… (ของเดิม)
</p>

<div class="ep-toggle" onclick="toggleEp()">▼ กล่องเลือกตอน</div>

<div id="epList" class="ep-list">
  <!-- EP 1-24 -->
  <script>
    for(let i=1;i<=24;i++){
      document.write(`
        <div class="episode" onclick="openEp(${i})">
          <span class="ep-num">EP ${i}</span>
          <span class="ep-title">พากย์ไทย</span>
        </div>
      `)
    }
  </script>
</div>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwTIvc9DXZk9H4M6jzccbiER4aDervYtJw0Drt7Ax_TyG9hnzyJrI8NIhwr2HH0NLu0/exec";
let epLinks = {};
let ready = false;

/* โหลดลิงก์จาก Sheet */
fetch(API_URL)
  .then(r=>r.json())
  .then(data=>{
    data.forEach(row=>{
      epLinks[String(row.episode)] = row.video_url;
    });
    ready = true;
  });

function openEp(ep){
  if(!ready) return alert("กำลังโหลดข้อมูล");
  const link = epLinks[String(ep)];
  if(!link) return alert("ยังไม่มีลิงก์ตอนนี้");
  location.href = link;
}

function toggleEp(){
  document.getElementById("epList").classList.toggle("open");
}
</script>

</body>
</html>