<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Anime Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box;font-family:system-ui}
body{
  margin:0;
  background:#0b0b0b;
  color:#fff;
  padding:16px;
}
h2{
  color:#00ffcc;
  margin-bottom:16px;
}
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:12px;
}
.card{
  background:#111;
  padding:14px;
  border-radius:12px;
  border:1px solid #222;
}
.card span{
  font-size:12px;
  color:#aaa;
}
.card h3{
  margin:6px 0 0;
  color:#00ffcc;
}

.section{
  margin-top:20px;
  background:#111;
  padding:16px;
  border-radius:14px;
  border:1px solid #222;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:12px;
}
th,td{
  border:1px solid #222;
  padding:8px;
  text-align:center;
}
th{color:#00ffcc;background:#161616}

.progress{
  height:8px;
  background:#222;
  border-radius:10px;
  overflow:hidden;
}
.bar{
  height:100%;
  background:linear-gradient(90deg,#00ffcc,#00cfa8);
}
</style>
</head>

<body>

<h2>üìä Anime Dashboard</h2>

<div class="cards">
  <div class="card"><span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</span><h3 id="sAnime">0</h3></div>
  <div class="card"><span>‡∏ï‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span><h3 id="sTotal">0</h3></div>
  <div class="card"><span>‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß</span><h3 id="sDone">0</h3></div>
  <div class="card"><span>‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span><h3 id="sWait">0</h3></div>
  <div class="card"><span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</span><h3 id="sPercent">0%</h3></div>
</div>

<div class="section">
  <h3>üìà ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°</h3>
  <canvas id="pie"></canvas>
</div>

<div class="section">
  <h3>üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
  <table>
    <thead>
      <tr>
        <th>‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</th>
        <th>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</th>
        <th>‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß</th>
        <th>‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
        <th>%</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
  </table>
</div>

<script>
let pieChart;

async function loadData(){
  const res = await fetch("anime.json?ts="+Date.now());
  const data = await res.json();

  let total=0, done=0;
  list.innerHTML="";

  data.anime.forEach(a=>{
    total+=a.total;
    done+=a.done;

    const p=Math.round(a.done/a.total*100);
    list.innerHTML+=`
      <tr>
        <td>${a.title}</td>
        <td>${a.total}</td>
        <td>${a.done}</td>
        <td>${a.total-a.done}</td>
        <td>
          ${p}%
          <div class="progress"><div class="bar" style="width:${p}%"></div></div>
        </td>
      </tr>`;
  });

  sAnime.textContent=data.anime.length;
  sTotal.textContent=total;
  sDone.textContent=done;
  sWait.textContent=total-done;
  sPercent.textContent=Math.round(done/total*100)+"%";

  drawChart(done,total-done);
}

function drawChart(done,wait){
  if(pieChart) pieChart.destroy();
  pieChart=new Chart(pie,{
    type:"doughnut",
    data:{
      labels:["‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß","‡πÄ‡∏´‡∏•‡∏∑‡∏≠"],
      datasets:[{
        data:[done,wait],
        backgroundColor:["#00ffcc","#333"]
      }]
    },
    options:{plugins:{legend:{labels:{color:"#fff"}}}}
  });
}

loadData();
setInterval(loadData,5000); // ‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥
</script>

</body>
</html>