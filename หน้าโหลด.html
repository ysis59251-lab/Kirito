<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AnimeFume</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif}
body{background:#000;color:#fff;min-height:100vh}

#bg{
  position:fixed;inset:0;
  background:url("https://wallpapers.com/images/hd/street-crossing-aesthetic-anime-scenery-l83ai5pxcgb259mv.jpg") center/cover;
  z-index:-1;
}

.header{
  position:sticky;top:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(10px);
  padding:15px;text-align:center;
  z-index:10;
}
.search{
  width:90%;max-width:400px;
  padding:10px 14px;
  border-radius:20px;border:none;
}

#menuBtn{
  position:fixed;top:15px;left:15px;
  font-size:28px;cursor:pointer;z-index:1000
}
#menuDropdown{
  position:fixed;top:60px;left:15px;
  background:#111;border-radius:10px;
  display:none;flex-direction:column;
}
#menuDropdown a{
  padding:10px 14px;color:#fff;text-decoration:none
}
#menuDropdown a:hover{background:#222}

.anime-list{
  padding:20px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
  gap:16px;
}

.anime-card{
  background:rgba(255,255,255,.08);
  border-radius:16px;
  overflow:hidden;
  text-decoration:none;color:#fff;
  position:relative;
}

.img-box img{
  width:100%;height:220px;object-fit:cover
}

.overlay-text{
  position:absolute;bottom:0;left:0;width:100%;
  padding:10px;font-size:13px;
  background:linear-gradient(to top,rgba(0,0,0,.8),transparent)
}

/* ===== BADGE ===== */
.badge{
  position:absolute;top:8px;left:8px;
  padding:4px 8px;border-radius:8px;
  font-size:12px;font-weight:bold
}
.hot{background:#ff3b3b}
.new{background:#00c853}
.recommend{background:#ffd600;color:#000}
</style>
</head>

<body>

<div id="bg"></div>

<div id="menuBtn">‚ò∞</div>
<div id="menuDropdown">
  <a href="#">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
  <a href="index2.html">‡∏ã‡∏±‡∏ö‡πÑ‡∏ó‡∏¢</a>
  <a href="index3.html">‡∏û‡∏≤‡∏Å‡∏¢‡πå‡πÑ‡∏ó‡∏¢</a>
  <a href="Administrator.html">‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</a>
</div>

<header class="header">
  <h1>AnimeFume</h1>
  <input class="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞...">
</header>

<section class="anime-list" id="animeList">

<a href="ByteWorld101.html" class="anime-card" data-title="Mizu Zokusei">
  <div class="img-box">
    <img src="https://kusuriyanohitorigoto.jp/season1/gallery/img/keyvisual/02.jpg">
    <div class="overlay-text">Mizu Zokusei<br>1‚Äì24 ‡∏û‡∏≤‡∏Å‡∏¢‡πå‡πÑ‡∏ó‡∏¢</div>
    <div class="badge recommend">‚≠ê ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
  </div>
</a>

<a href="202.html" class="anime-card" data-title="SAO">
  <div class="img-box">
    <img src="https://anifume.com/images/18/Sword-Art-Online-1.jpg">
    <div class="overlay-text">Sword Art Online<br>1‚Äì25</div>
  </div>
</a>

<a href="203.html" class="anime-card" data-title="DANDADAN">
  <div class="img-box">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3G46VISYTyNvhfCIRxvFe6KExkWlNdekrUg88tKYhZ7wA0NNXGmQg74rj&s=10">
    <div class="overlay-text">DAN DA DAN<br>1‚Äì12</div>
    <div class="badge new">üÜï ‡πÉ‡∏´‡∏°‡πà</div>
  </div>
</a>

</section>

<script src="firebase.js"></script>
<script>
/* ===== MENU ===== */
const menuBtn=document.getElementById("menuBtn")
const menu=document.getElementById("menuDropdown")
menuBtn.onclick=()=>menu.style.display=menu.style.display==="flex"?"none":"flex"
document.addEventListener("click",e=>{
  if(!menu.contains(e.target)&&e.target!==menuBtn)menu.style.display="none"
})

/* ===== REAL VIEW + HOT ===== */
document.querySelectorAll(".anime-card").forEach(card=>{
  const title=card.dataset.title
  if(!title)return

  const viewRef=db.ref("views/anime/"+title)
  viewRef.transaction(v=>(v||0)+1)

  viewRef.get().then(snap=>{
    const views=snap.val()||0
    if(views>=50){
      const b=document.createElement("div")
      b.className="badge hot"
      b.textContent="üî• ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Æ‡∏¥‡∏ï"
      card.querySelector(".img-box").appendChild(b)
    }
    card.dataset.views=views
    sortCards()
  })
})

/* ===== SORT BY POPULAR ===== */
function sortCards(){
  const box=document.getElementById("animeList")
  const cards=[...box.children]
  cards.sort((a,b)=>(b.dataset.views||0)-(a.dataset.views||0))
  cards.forEach(c=>box.appendChild(c))
}
</script>

</body>
</html>