<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AnimeFume Dashboard</title>

<style>
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:#0f172a;
  color:#fff;
  padding:20px;
}

h1{
  color:#22d3ee;
}

.panel{
  margin-top:20px;
}

.anime-card{
  display:flex;
  gap:15px;
  background:#111827;
  padding:15px;
  border-radius:20px;
  margin-bottom:15px;
}

.anime-card img{
  width:90px;
  height:120px;
  object-fit:cover;
  border-radius:12px;
}

.anime-info{
  flex:1;
}

.anime-title{
  font-size:18px;
  font-weight:bold;
  color:#22d3ee;
  margin-bottom:6px;
}

.anime-desc{
  font-size:14px;
  color:#cbd5e1;
  margin-bottom:8px;
}

.view-badge{
  display:inline-block;
  background:#1e293b;
  padding:4px 8px;
  border-radius:8px;
  font-size:12px;
  margin-right:8px;
}

.delete-btn{
  background:#ff3b3b;
  color:#fff;
  border:none;
  padding:6px 10px;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>
<body>

<h1>üìä AnimeFume Dashboard</h1>

<div class="panel">
  <h3>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞</h3>
  <div id="animeListBox">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
</div>

<script type="module">

/* ========= FIREBASE ========= */

import { initializeApp } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

import {
  getDatabase,
  ref,
  onValue,
  remove
} from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

/* ‡πÉ‡∏™‡πà config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì */
const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT.firebaseapp.com",
  databaseURL: "https://PROJECT-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "PROJECT",
  storageBucket: "PROJECT.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

/* ========= ‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞ ========= */

const animeListBox = document.getElementById("animeListBox");

onValue(ref(db,"animeList"), snap=>{

  animeListBox.innerHTML="";

  if(!snap.exists()){
    animeListBox.innerHTML="‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£";
    return;
  }

  const data = snap.val();

  Object.entries(data).forEach(([id,anime])=>{

    const views = anime.views || 0;

    animeListBox.innerHTML += `
      <div class="anime-card">
        <img src="${anime.image || 'https://via.placeholder.com/90x120'}">
        <div class="anime-info">
          <div class="anime-title">${anime.title}</div>
          <div class="anime-desc">${anime.description || ''}</div>
          <span class="view-badge">üëÅ ${views}</span>
          <button class="delete-btn" onclick="deleteAnime('${id}')">‡∏•‡∏ö</button>
        </div>
      </div>
    `;
  });

});

/* ========= ‡∏•‡∏ö ========= */

function deleteAnime(id){
  if(confirm("‡∏•‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")){
    remove(ref(db,"animeList/"+id));
  }
}

window.deleteAnime = deleteAnime;

</script>
</body>
</html>