<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Report a Problem</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif}
body{
  min-height:100vh;
  background:#000;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
}
#bg{
  position:fixed;
  inset:0;
  background:url("https://wallpapers.com/images/hd/street-crossing-aesthetic-anime-scenery-l83ai5pxcgb259mv.jpg") center/cover;
  z-index:-1;
  filter:blur(2px) brightness(.6);
}
.report-card{
  width:92%;
  max-width:420px;
  background:rgba(0,0,0,.75);
  backdrop-filter:blur(10px);
  border-radius:20px;
  padding:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.7);
}
.report-card h1{font-size:20px;margin-bottom:6px}
.report-card p{font-size:13px;color:#ccc;margin-bottom:14px}
input,textarea{
  width:100%;
  background:#000;
  border:1px solid #333;
  border-radius:12px;
  color:#fff;
  padding:10px;
  margin-bottom:10px;
  font-size:14px;
}
textarea{min-height:110px;resize:none}
button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#ff3b3b;
  color:#fff;
  font-size:15px;
  cursor:pointer;
}
button:disabled{opacity:.6}
.back{
  margin-top:10px;
  text-align:center;
  font-size:13px;
  color:#aaa;
  cursor:pointer;
}
.back:hover{color:#fff}
</style>
</head>

<body>
<div id="bg"></div>

<div class="report-card">
  <h1>Report a Problem</h1>
  <p>แจ้งปัญหาที่พบในการใช้งาน</p>

  <input id="page" placeholder="หน้าที่พบปัญหา (เช่น หน้า Anime / ตอนที่)">
  <textarea id="detail" placeholder="อธิบายปัญหาที่พบ..."></textarea>

  <button id="sendBtn">ส่งปัญหา</button>
  <div class="back" onclick="history.back()">← กลับหน้าเดิม</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getDatabase, ref, push, set }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "API_KEY",
  authDomain: "PROJECT.firebaseapp.com",
  databaseURL: "https://PROJECT-default-rtdb.firebaseio.com",
  projectId: "PROJECT",
  appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const btn = document.getElementById("sendBtn");

btn.onclick = async () => {

  const page = document.getElementById("page").value.trim() 
      || document.title 
      || location.pathname;

  const detail = document.getElementById("detail").value.trim();

  if(!detail){
    alert("กรุณาพิมพ์รายละเอียด");
    return;
  }

  btn.disabled = true;
  btn.textContent = "กำลังส่ง...";

  try{
    await set(push(ref(db,"reports/")),{
      page,
      detail,
      time: Date.now(),
      read:false
    });

    alert("ส่งเรียบร้อย ✅");
    document.getElementById("detail").value="";
    document.getElementById("page").value="";

  }catch(e){
    alert("ส่งไม่สำเร็จ");
  }

  btn.disabled = false;
  btn.textContent = "ส่งปัญหา";
};
</script>
</body>
</html>