<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AnimeFume Admin</title>
<style>

.admin-table{
  width:100%;
  min-width:420px;
  border-collapse:collapse;
  background:#111;
  color:#fff;
  font-size:14px;
}

.admin-table th,
.admin-table td{
  border:1px solid #333;
  padding:8px;
  text-align:center;
}

.admin-table th{
  background:#1c1c1c;
  color:#00ffcc;
}

.admin-table tr.wait{
  background:#2a1a1a;
}

.admin-table tr.done{
  background:#132a22;
}

.summary{
  margin:10px 0;
  font-weight:bold;
}

.toggle-btn{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  background:#ffd24d;
  cursor:pointer;
  font-weight:600;
}
/* ===============================
   RESET & BASE
================================ */
*{
  box-sizing:border-box;
  margin:0;
  padding:0;
  font-family:system-ui, -apple-system, Segoe UI, sans-serif;
}

body{
  min-height:100vh;
  background:#0b0b0b;
  color:#fff;
  padding:20px;
}

/* ===============================
   HEADINGS
================================ */
h1{
  text-align:center;
  color:#ff4d4d;
  margin-bottom:10px;
}

h3{
  text-align:center;
  color:#ffd24d;
  margin:15px 0 10px;
}

/* ===============================
   CONTAINER
================================ */
.container{
  max-width:520px;
  margin:auto;
}

/* ===============================
   INPUTS / SELECT
================================ */
input,
select{
  width:100%;
  padding:10px 12px;
  margin:6px 0;
  border-radius:8px;
  border:1px solid #222;
  background:#1a1a1a;
  color:#fff;
  font-size:14px;
}

input::placeholder{
  color:#777;
}

/* ===============================
   DEFAULT BUTTON (‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)
================================ */
button{
  width:100%;
  padding:10px 12px;
  margin:8px 0;
  border:none;
  border-radius:8px;
  background:#ff4d4d;
  color:#fff;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  transition:0.2s;
}

button:hover{
  background:#ff1a1a;
}

/* ===============================
   GO TO SITE BUTTON (‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏≥‡∏ó‡∏≤‡∏á)
================================ */
.go-btn{
  background:#00ffcc;
  color:#000;
}

.go-btn:hover{
  background:#00ccaa;
}

/* ===============================
   ADMIN BOX
================================ */
.go-btn{
  margin-bottom:20px;
  padding:14px;
  font-size:15px;
  background:#00ffcc;
  color:#000;
  border-radius:12px;
  font-weight:700;
}

.admin-title{
  font-size:16px;
  font-weight:600;
  margin-bottom:16px;
  letter-spacing:.5px;
  color:#7cffc4;
}

/* ===============================
   STATS
================================ */
.stat{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 0;
  border-bottom:1px solid #1f1f1f;
}

.stat:last-child{
  border-bottom:none;
}

.label{
  font-size:13px;
  color:#aaa;
}

.value{
  font-size:20px;
  font-weight:600;
  color:#fff;
}

.value.small{
  font-size:13px;
  color:#ccc;
  font-family:monospace;
}

/* ===============================
   CARD (EP LIST / PREVIEW)
================================ */
.card{
  background:linear-gradient(135deg,#1c1c1c,#262626);
  padding:12px 16px;
  border-radius:12px;
  margin:10px 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 6px 12px rgba(0,0,0,.5);
}

.card button{
  width:auto;
  padding:6px 14px;
  background:#ff4d4d;
  border-radius:8px;
  font-size:13px;
}

.card button:hover{
  background:#ff1a1a;
}

/* ===============================
   PREVIEW BOX
================================ */
.preview{
  margin:10px 0;
  background:#1a1a1a;
  padding:10px;
  border-radius:12px;
  display:flex;
  align-items:center;
  gap:10px;
  border:1px solid #222;
}

.preview img{
  width:60px;
  height:80px;
  object-fit:cover;
  border-radius:6px;
  border:1px solid #444;
}

.preview span{
  font-size:14px;
  color:#ddd;
}

/* ===============================
   MOBILE
================================ */
@media(max-width:500px){
  .card{
    flex-direction:column;
    align-items:flex-start;
    gap:6px;
  }
}
</style>
</head>
<body>

<div id="bg"></div>

<header class="header">
  <h1>AnimeFume</h1>
  <input class="search" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏∞...">

  <div id="menuBtn">‚ò∞</div>
  <div id="menuDropdown" class="hidden">
    <a href="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô.html">üîí</a>
   
  </div>
</header>

<section class="anime-list" id="animeList">

<div class="container">

‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

<h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á / ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h3>
<select id="animeSelect">
  <option value="">-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà --</option>
</select>
<input id="animeNew" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà (‡∏Å‡∏£‡∏≠‡∏Å‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà)">
<input id="ep" type="number" placeholder="‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà">
<input id="video" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠">
<input id="poster" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏õ‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå">
<button onclick="addEpisode()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≠‡∏ô</button>

<h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ</h3>

<div class="summary">
  ‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß: <span id="doneCount">0</span> /
  ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="waitCount">0</span> |
  ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤: <span id="progressPercent">0%</span>
</div>

<div style="overflow-x:auto">
<table class="admin-table" id="epTable">
  <thead>
    <tr>
      <th>‡∏ï‡∏≠‡∏ô</th>
      <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
    </tr>
  </thead>
  <tbody>
    <!-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á -->
    <tr data-status="done">
      <td>EP 1</td>
      <td class="status">‚úî ‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß</td>
      <td><button class="toggle-btn">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button></td>
    </tr>

    <tr data-status="wait">
      <td>EP 2</td>
      <td class="status">‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á</td>
      <td><button class="toggle-btn">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</button></td>
    </tr>
  </tbody>
</table>
</div>

<div id="episodeList"></div>

<button onclick="saveJSON()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ü‡∏•‡πå JSON</button>
</div>

<div class="admin-box">
  <div class="admin-title">Visitor Monitor</div>

  <div class="stat">
    <span class="label">Total Visits</span>
    <span class="value">128</span>
  </div>

  <div class="stat">
    <span class="label">Unique Devices</span>
    <span class="value">42</span>
  </div>

  <div class="stat">
    <span class="label">Current Device</span>
    <span class="value small">DEV-A9X3F2</span>
  </div>

  <div class="stat">
    <span class="label">Last Access</span>
    <span class="value small">2026-01-16 18:45</span>
  </div>
</div>

<script>

function updateTable(){
  const rows = document.querySelectorAll("#epTable tbody tr");
  let done = 0;
  let wait = 0;

  rows.forEach(row=>{
    const status = row.dataset.status;
    row.classList.remove("done","wait");

    if(status === "done"){
      done++;
      row.classList.add("done");
      row.querySelector(".status").innerText = "‚úî ‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß";
    }else{
      wait++;
      row.classList.add("wait");
      row.querySelector(".status").innerText = "‚è≥ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á";
    }
  });

  const total = done + wait;
  const percent = total ? Math.round((done / total) * 100) : 0;

  document.getElementById("doneCount").innerText = done;
  document.getElementById("waitCount").innerText = wait;
  document.getElementById("progressPercent").innerText = percent + "%";
}

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
document.addEventListener("click",e=>{
  if(e.target.classList.contains("toggle-btn")){
    const row = e.target.closest("tr");
    row.dataset.status =
      row.dataset.status === "done" ? "wait" : "done";
    updateTable();
  }
});

updateTable();

function goToSite(){
  window.location.href = "‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô.html";
}

let data = { animeTitle:"", episodes:[] };

// ‡πÇ‡∏´‡∏•‡∏î JSON ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
fetch("episodes.json")
  .then(res=>res.json())
  .then(json=>{
    data=json;
    populateAnimeSelect();
    renderList();
  })
  .catch(()=>console.log("‡πÑ‡∏°‡πà‡∏°‡∏µ JSON ‡πÄ‡∏î‡∏¥‡∏°"));

// dropdown
function populateAnimeSelect(){
  const select=document.getElementById("animeSelect");
  if(!data.animeTitle) return;
  const option=document.createElement("option");
  option.value=data.animeTitle;
  option.textContent=data.animeTitle;
  select.appendChild(option);
  select.value=data.animeTitle;
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏≠‡∏ô
function addEpisode(){
  const select=document.getElementById("animeSelect");
  const animeNew=document.getElementById("animeNew").value.trim();
  const ep=parseInt(document.getElementById("ep").value);
  const video=document.getElementById("video").value.trim();
  const poster=document.getElementById("poster").value.trim();

  if(animeNew) data.animeTitle=animeNew;
  else if(select.value) data.animeTitle=select.value;
  else { alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á"); return; }

  if(!ep||!video){ alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠"); return; }

  if(data.episodes.some(e=>e.ep===ep)){ alert("‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß"); return; }

  data.episodes.push({ep,video,poster});
  renderList();
}

// ‡∏•‡∏ö‡∏ï‡∏≠‡∏ô
function deleteEpisode(ep){
  if(!confirm("‡∏•‡∏ö‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà "+ep+" ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?")) return;
  data.episodes=data.episodes.filter(e=>e.ep!==ep);
  renderList();
}

// ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ô + preview
function renderList(){
  const box=document.getElementById("episodeList");
  box.innerHTML="";
  data.episodes.sort((a,b)=>a.ep-b.ep).forEach(e=>{
    const div=document.createElement("div");
    div.className="card";

    const preview=document.createElement("div");
    preview.className="preview";
    const img=document.createElement("img");
    img.src=e.poster||"https://via.placeholder.com/60x80";
    const span=document.createElement("span");
    span.textContent="EP "+e.ep+" - "+e.video;
    preview.appendChild(img);
    preview.appendChild(span);

    const btn=document.createElement("button");
    btn.textContent="‡∏•‡∏ö";
    btn.onclick=()=>deleteEpisode(e.ep);

    div.appendChild(preview);
    div.appendChild(btn);
    box.appendChild(div);
  });
}

// ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å JSON
function saveJSON(){
  const blob=new Blob([JSON.stringify(data,null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="episodes.json";
  a.click();
}

</script>
</body>
</html>